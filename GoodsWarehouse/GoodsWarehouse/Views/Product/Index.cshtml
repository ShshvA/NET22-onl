@using System.ComponentModel.DataAnnotations
@{
    ViewData["Title"] = "Home Page";
}

@model GoodsWarehouse.VM.ProductsVM

@{
    bool isData = false;
}
<div class="w-100">
    @if (Model.ProductsList.Any())
    {
        isData = true;
        @await Html.PartialAsync("~/Views/Product/ProductList.cshtml", @Model)
    }
</div>

<div class="d-flex">
    <div class="dropdown w-100">
        <button type="button" class="btn btn-primary dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
            Добавить продукт
        </button>
        <form class="dropdown-menu p-3 flex-column" method="post" asp-controller="Product" asp-action="AddProduct">
            <div class="d-flex mb-3 gap-2 align-items-center">
                <label class="form-label mb-0" style="min-width: 130px;">Название товара</label>
                <input type="text" class="form-control" name="Name">
            </div>
            <div class="d-flex mb-3 gap-2 align-items-center">
                <label class="form-label mb-0" style="min-width: 130px;">Тип товара</label>
                <select class="form-select" name="Type">
                    @foreach (var type in Model.ProductTypesList)
                    {
                        @switch (type)
                        {
                            case ProductType.Fruits:
                                <option value="1">Фрукты</option>
                                break;
                            case ProductType.Vegetables:
                                <option value="2">Овощи</option>
                                break;
                            case ProductType.Berries:
                                <option value="3">Ягоды</option>
                                break;
                            default:
                                <option disabled>Выберите тип...</option>
                                break;
                        }
                    }
                </select>
            </div>
            <div class="d-flex mb-3 gap-2 align-items-center">
                <label class="form-label mb-0" style="min-width: 130px;">Стоимость единицы товара</label>
                <div class="input-group">
                    <input type="text" class="form-control" name="Price">
                    <span class="input-group-text">$</span>
                </div>
            </div>
            <div class="d-flex mb-3 gap-2 align-items-center">
                <label class="form-label mb-0" style="min-width: 130px;">Количество товара</label>
                <input type="number" class="form-control" name="NumberOfProducts">
            </div>
            <button type="submit" class="btn btn-primary w-100">Сохранить</button>
        </form>
    </div>

    @if (isData)
    {
        <div>
            <form method="post" asp-controller="ProductReport" asp-action="ShowReport">
                <button type="submit" class="btn btn-outline-primary">
                    Отчет
                </button>
            </form>
        </div>
    }
</div>

<div class="w-100">
    @if (Model.Report.Any())
    {
        @await Html.PartialAsync("~/Views/Product/Report.cshtml", @Model)        
    }
</div>






