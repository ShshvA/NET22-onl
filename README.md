# TMS Lesson 21 - Homework

---

### Основы баз данных

---

Установить MySQL, Microsoft SQL Server management Studio, создать базу данных с 3мя таблицами – Игрок, комманда, тренер.  
Игрок может принадлежать одной комманде, в комманде может быть много игроков и один тренер.  
Один тренер может тренировать много комманд.  
Добавить проверку на имя (не менее 2, не более 10), добавить уникальный ключ для 2х колонок (имя, фамилия).

![Диаграмма](diagram.png)

![Данные](data.png)

---

### Компоненты БД

---

Добавить в базу данных триггер, который срабатывает на добавление игрока в таблицу.  
Добавить колонки Team.Rate, Player.Age, Player.Salary. Триггер считает зарплату исходя из Rate команды, умноженное на Age/10.  

#### Задание повышенной сложности

Создать хранимую процедуру, которая считает количество денег, которая команда тратит на игроков.  
Через транзакцию совершить «Трансфер игрока в другую команду через свободный рынок». Необходимо удалить игрока из команды, затем добавить в новую. Проверить функции Commit, RollBack.  

---

##### Работа триггера

![Триггер](players_trigger_work.png)

##### Работа процедуры

![Игроки](players.png)

![Результат процедуры](procedure_work.png)

##### Работа транзакции

###### Успешная транзакция

![Успешная транзакция](successfull_transaction.png)

###### Неудачная транзакция и откат

![Неудачная транзакция](unsuccessfull_transaction.png)